<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,inital-scale=1.0,maximum-scale=1.0,user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="format-detection" content="telephone=no">
        <title>
            安慕希·不踩白格
        </title>
        <meta name="description" content="不睬白格，微信红包等你拿！更有希腊之旅，I Want You!">
		<link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/layout.css">
		<link rel="stylesheet" href="css/loader.css">
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.tmpl.js"></script>
		<script src="js/freeze-touch-move.js"></script>
		<script type="text/javascript"> 
			var me = null;
			var users = null;
			var totalNum = null;
			$(window).load(function () {
				// $.getJSON("services/server.php", function(json){ 
				// 	alert(JSON.stringify(json));
				// });
				$.ajax({
					type : "Get",
					url : "services/read.php",
					datatype : "json",
					success : function (response) {
						// $("#err").html(response);
						// alert(response);
						var responseObj = JSON.parse(response);
						users = responseObj.dataList;
						me = responseObj.me;
						totalNum = responseObj.total.value;
						$(responseObj.dataList).each(function(i, user) { 
							user.rank = i + 1;
							// alert("Rank: " + user.rank + " OpenId: " + user.openId + " Nickname: " + user.nickname);
						});
						$("#globalScore").tmpl(users).appendTo("#globalScoreContainer table");							
						$("#myScore").tmpl(me).appendTo("#myScoreContainer table");	
						if (!$.isNumeric(totalNum)) {
							totalNum = 0;
						}
						$("#total").text(totalNum);	
						$("#loader").fadeOut("slow");	
					},
					error : function (xhr, textStatus, errorThrown) {
						// alert(errorThrown);
						$("#loader").fadeOut("slow");
						$("#err").html(errorThrown);
					}
				});
			});
		</script>
		<script type="text/javascript">		
			$(window).ready(function () {
				var url = window.location.href.substring(0, window.location.href.lastIndexOf('/')) + "/game.html";			
				$('#back').click(function(){
					window.location.href = url;
				});			
				// var users = [
				// 	{ rank: "1", nickname: 'Thomas', openId: 'openId1', score: '32.1', headimgurl: 'http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46'},
				// 	{ rank: "2", nickname: 'Richard', openId: 'openId2', score: '35.5', headimgurl: 'image/photo.jpg'},
				// 	{ rank: "3", nickname: 'Jerry', openId: 'openId3', score: '42.9', headimgurl: 'http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46'}
				// ];
 
				// $("#globalScore").tmpl(users).appendTo("#globalScoreContainer table");			
			});
		</script>
    </head>
    
    <body>
	<div id="loader" class="loader"></div>
	<div id="container" >
		<div id="err"></div>
        <div class="tab_wraptop">
            <table width="100%" border="0" cellpadding="0" cellspacing="0" class="tab_top">
                <tbody>
                    <tr>
                        <td colspan="3">
                            <img src="image/space.png" width="100%">
                        </td>
                    </tr>
                    <tr>
                        <td width="20%">
                            <div align="left" style="padding-left: 20px;">
                                <img src="image/logo.png" width="100%" />
                            </div>
                        </td>
                        <td>
                            <div align="center" style=" font-family:黑体; color:#666;font-size:18px">
                                经典模式
                            </div>
                            <div>
                            </div>
                        </td>
                        <td width="30%">
                            <div id = "back" align="center" style=" font-family:黑体; color:#0099CC;padding-left:20px;font-size:18px">
                                再玩一次
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div style="width:100%;height:110%; background:url(image/bg.jpg); background-size: 100% 100%; background-repeat: no-repeat;">
            <div style="padding-top:10%; width:100%;">
            </div>
			<div id="myScoreContainer">
			<script id="myScore" type="text/x-jQuery-tmpl">
					<tr>
						<td width="20%">
                        <div align="center" class="font highlight">
                            <b>${rank}</b>
                        </div>
                    </td>
                    <td width="6%">
                        <div align="center" class="pic">
                            <img src="${headimgurl}" width="80px">
                        </div>
                    </td>
                    <td width="30%">
                        <div align="left" class="font2 highlight">
                            <b>${nickname}</b>
                        </div>
                    </td>
					<td width="30%">
                        <div align="right" class="font3 highlight">
                            <b>${score}秒</b>
                        </div>
                    </td>
					</tr>
			</script>
            <table width="94%" border="0" align="center" cellpadding="0" cellspacing="0">
                <tr>
                    <th colspan="4" align="left" >
                        <div style=" font-size:18px;border-bottom:1px solid #ccc;padding-top: 12px;padding-bottom: 12px;">
                            我的排名
                        </div>
                    </th>
                </tr>
				<!--
				 <tr>
                    <td width="4%">
                        <div align="center" class="font">
                            
                        </div>
                    </td>
                    <td width="6%">
                        <div align="center" class="pic">
                            <img src="image/photo.jpg" >
                        </div>
                    </td>
                    <td width="50%">
                        <div align="left" class="font2">
                            我
                        </div>
                    </td>
					<td width="30%">
                        <div align="right" class="font3">
                            19.25秒
                        </div>
                    </td>
                </tr>
				-->
            </table>
			</div>
			<div id="globalScoreContainer">
			<script id="globalScore" type="text/x-jQuery-tmpl">
					<tr>
						<td width="4%">
                        <div align="center" class="font">
                            ${rank}
                        </div>
                    </td>
                    <td width="6%">
                        <div align="center" class="pic">
                            <img src="${headimgurl}" width="40px">
                        </div>
                    </td>
                    <td width="50%">
                        <div align="left" class="font2">
                            ${nickname}
                        </div>
                    </td>
					<td width="30%">
                        <div align="right" class="font3">
                            ${score}秒
                        </div>
                    </td>
					</tr>
				</script>	
            <table width="94%" border="0" align="center" cellpadding="0" cellspacing="0">
				<tr>
                    <th colspan="4" align="left">
                        <div style=" font-size:18px;border-bottom:1px solid #ccc;padding-top: 12px;padding-bottom: 12px;">
                            所有<span id="total">0</span>位玩家
                        </div>
                    </th>
                </tr>
				<!--
                <tr>
                    <td width="4%">
                        <div align="center" class="font">
                            1
                        </div>
                    </td>
                    <td width="6%">
                        <div align="center" class="pic">
                            <img src="image/photo.jpg" width="40px"/>
                        </div>
                    </td>
                    <td width="50%">
                        <div align="left" class="font2">
                            张山
                        </div>
                    </td>
					 <td width="30%">
                        <div align="right" class="font3">
                            19.25秒
                        </div>
                    </td>
                </tr>
				 <tr>
                    <td width="4%">
                        <div align="center" class="font">
                            2
                        </div>
                    </td>
                    <td width="6%">
                        <div align="center" class="pic">
                            <img src="image/photo.jpg" width="40px"/>
                        </div>
                    </td>
                    <td width="50%">
                        <div align="left" class="font2">
                            李四
                        </div>
                    </td>
					<td width="30%">
                        <div align="right" class="font3">
                            19.25秒
                        </div>
                    </td>
                </tr>
				<tr>
                    <td width="4%">
                        <div align="center" class="font">
                            3
                        </div>
                    </td>
                    <td width="6%">
                        <div align="center" class="pic">
                            <img src="image/photo.jpg" width="40px"/>
                        </div>
                    </td>
                    <td width="50%">
                        <div align="left" class="font2">
                            王五
                        </div>
                    </td>
					<td width="30%">
                        <div align="right" class="font3">
                            19.25秒
                        </div>
                    </td>
                </tr>
				-->
            </table>
			</div>
        </div>
        <div class="tab_wrap">
            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="tab_bot">
                <tbody>                    
                    <tr>
                        <td width="15%">
                        </td>
                        <td width="15%">
                        </td>
                        <td width="40%">
                            <div align="center">
                                <a href="#">
                                    <img src="image/hl.png" width="100%">
                                </a>
                            </div>
                        </td>
                        <td width="15%">
                        </td>
                        <td width="15%">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
		</div>
    </body>

</html>